---
import { SITE_CONFIG } from '../lib/config.ts';
import '../styles/global.css';
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{Astro.props.title || SITE_CONFIG.title}</title>
  <meta name="description" content={Astro.props.description || SITE_CONFIG.description}>
  <meta name="keywords" content="cybersecurity, pentesting, fullstack, react, python, ethical hacking, portfolio, Coral J√°come">
  <meta name="author" content="Coral J√°come">
  
  <!-- Open Graph / SEO -->
  <meta property="og:title" content={Astro.props.title || SITE_CONFIG.title}>
  <meta property="og:description" content={Astro.props.description || SITE_CONFIG.description}>
  <meta property="og:type" content="website">
  <meta property="og:url" content={SITE_CONFIG.siteUrl}>
  <meta property="og:image" content={`${SITE_CONFIG.siteUrl}/images/og-image.jpg`}>
  
  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="navbar-container">
      <a href="/" class="navbar-logo">
        Coral<span class="logo-glow">JG</span>
      </a>

      <!-- Desktop Menu -->
      <ul class="navbar-menu">
        <li><a href="#worlds" class="nav-link">Worlds</a></li>
        <li><a href="#enchantments" class="nav-link">Enchantments</a></li>
        <li><a href="#potions" class="nav-link">Potions</a></li>
        <li><a href="#spellbook" class="nav-link">Spellbook</a></li>
        <li><a href="#cta" class="nav-link">Contact</a></li>
      </ul>

      <!-- Actions -->
      <div class="navbar-actions">
        <a href={SITE_CONFIG.urls.github} target="_blank" rel="noopener noreferrer" class="github-btn">
          GitHub
        </a>
        <button class="mobile-menu-toggle" aria-label="Menu">
          <span class="hamburger-line">-</span>
          <span class="hamburger-line">-</span>
          <span class="hamburger-line">-</span>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
      <a href="#worlds" class="mobile-link">Worlds</a>
      <a href="#enchantments" class="mobile-link">Enchantments</a>
      <a href="#potions" class="mobile-link">Potions</a>
      <a href="#spellbook" class="mobile-link">Spellbook</a>
      <a href="#cta" class="mobile-link">Contact</a>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main style="margin-top: 80px;">
    <slot />
  </main>

  <!-- GLOBAL JAVASCRIPT -->
  <script is:client>
    // SCROLL ANIMATIONS
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('reveal-active');
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    // NAVBAR SCROLL EFFECT
    window.addEventListener('scroll', () => {
      const navbar = document.querySelector('.navbar');
      navbar?.classList.toggle('scrolled', window.scrollY > 50);
    });

    // HAMBURGER MENU
    const menuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileMenu = document.querySelector('.mobile-menu');
    menuToggle?.addEventListener('click', () => {
      menuToggle.classList.toggle('active');
      mobileMenu?.classList.toggle('active');
    });

    // CLOSE MOBILE MENU
    document.querySelectorAll('.mobile-link').forEach(link => {
      link.addEventListener('click', () => {
        menuToggle?.classList.remove('active');
        mobileMenu?.classList.remove('active');
      });
    });

    // CLOSE ON SCROLL
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        menuToggle?.classList.remove('active');
        mobileMenu?.classList.remove('active');
      }
    });

    // SMOOTH SCROLL
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        target?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    // THEME TOGGLE
    document.querySelector('.theme-toggle')?.addEventListener('click', () => {
      document.body.classList.toggle('dark-theme');
      const icon = document.querySelector('.theme-toggle');
      icon.textContent = document.body.classList.contains('dark-theme') ? 'üåô' : '‚òÄÔ∏è';
    });
  </script>
</body>
</html>